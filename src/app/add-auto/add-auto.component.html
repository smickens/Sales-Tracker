<div class="container center">
    <app-notification id="message"
      [isSuccess]="didAddApplication"
      [shouldDisplay]="showMessage"
      [name]="clientName"
      [returnToLink]="allAppRoute"
      (dismissedEvent)="hideNotification()"
    ></app-notification>

    <div class="block_bg">
        <div class="block">
            <div class="form-row">
                <h4 style="font-weight: 600; color: #63B7AF;">{{ form_title }}</h4>
            </div>
            
            <form *ngIf="app_loaded" [formGroup]="addAutoAppForm">
                <div class="form-row mb-2">
                    <div class="col form-group">
                        <label for="date">DATE</label>
                        <input type="date" class="form-control" formControlName="date" id="date">
                    </div>
                    <div class="col form-group">
                        <label for="producer_id">PRODUCER</label>
                        <select class="custom-select" formControlName="producer_id" id="producer_id" (focus)="setValid($event)">
                            <option value="" selected>Select Producer</option>
                            <option *ngFor="let producer of producers" value="{{producer.id}}"> {{ producer.name }} </option>
                        </select>
                    </div>
                    <div class="col form-group">
                        <label for="client_name">CLIENT</label>
                        <!-- name="client_name" required -->
                        <input type="text" class="form-control" formControlName="client_name" id="client_name" (focus)="setValid($event)" autocomplete="off">
                    </div>
                </div>
        
                <div class="form-row mb-2">
                    <div class="col-auto form-group">
                        <label for="auto_type">AUTO TYPE</label>
                        <select class="custom-select" formControlName="auto_type" id="auto_type" (focus)="setValid($event)" (change)="updateBonus()">
                            <option value="" selected>Select Auto Type</option>
                            <option *ngFor="let option of constants['auto_types']" value="{{option}}"> {{ option }} </option>
                        </select>
                    </div>
        
                    <div class="col form-group">
                        <label for="tiers">TIERS</label>
                        <select class="custom-select" formControlName="tiers" id="tiers" (focus)="setValid($event)" (change)="updateBonus()">
                            <option value="" selected>Select Tier</option>
                            <option *ngFor="let option of constants['tiers']" value="{{option}}"> {{ option }} </option>
                        </select>
                    </div>
        
                    <div class="col-auto form-group">
                        <label for="bonus">BONUS</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="number" min="0" class="form-control" formControlName="bonus" id="bonus" autocomplete="off" style="max-width: 120px;">
                        </div>
                    </div>
                </div>
        
                <div class="form-row mb-2">    
                    <div class="col-auto form-group">
                        <label for="submitted_premium">SUBMITTED PREMIUM</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="number" min="0" class="form-control" formControlName="submitted_premium" id="submitted_premium" autocomplete="off" style="max-width: 120px;">
                        </div>
                    </div>

                    <div class="col-auto form-group">
                        <label for="issued_premium">ISSUED PREMIUM</label>
                        <div class="input-group">
                            <div class="input-group-prepend">
                                <span class="input-group-text">$</span>
                            </div>
                            <input type="number" min="0" class="form-control" formControlName="issued_premium" id="issued_premium" autocomplete="off" style="max-width: 120px;">
                        </div>
                    </div>

                    <div class="col form-group">
                        <label for="status">STATUS</label>
                        <select class="custom-select" formControlName="status" id="status" (change)="isIssued($event.target.value)" (focus)="setValid($event)">
                            <option value="" selected>Select Status</option>
                            <option *ngFor="let option of constants['status_options']" value="{{option}}"> {{ option }} </option>
                        </select>
                    </div>
                </div>

                <div class="form-row mb-2">
                    <div class="col form-group">
                        <label for="marketing_source">MARKETING SOURCE</label>
                        <select class="custom-select" formControlName="marketing_source" id="marketing_source">
                            <option value="" selected>Select Marketing Source</option>
                            <option *ngFor="let option of constants['marketing_source']" value="{{option}}"> {{ option }} </option>
                        </select>
                    </div>

                    <div class="col form-group">
                        <label for="co_producer_id">CO-PRODUCER</label>
                        <select class="custom-select" formControlName="co_producer_id" id="co_producer_id">
                            <option value="" selected>Select Co-Producer</option>
                            <option *ngFor="let producer of producers" value="{{producer.id}}"> {{ producer.name }} </option>
                        </select>
                    </div>
                </div>
        
                <div style="display: flex; justify-content: center;">
                    <input class="submit_btn" type="submit" value="{{ button_text }}" (click)="onSubmit()">
                </div>
            </form>

        </div>
    </div>    
</div>
