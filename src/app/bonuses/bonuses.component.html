<div class="row" style="height: 100%;">
    <div style="padding: 30px; width: 100%;">
        <div class="block">
            <div style="display: flex; justify-content: space-between;">
              <div style="display: flex; align-items: center;">
                <h4 class="header" style="margin-bottom: 0px; padding-right: 15px; page-break-before: always;"> Bonuses - </h4>
                <select class="custom-select noPrintPdf" style="width: 250px;" id="producer" (change)="updateList($event.target.value)">
                    <option selected>All Producers</option>
                    <option *ngFor="let producer of all_producers" value="{{producer.id}}">{{ producer.name }}</option>
                </select>
              </div>
              <!-- <div style="display: flex; align-items: center;">
                <p class="noPrintPdf" style="margin: 0px; padding-right: 10px;">Year: </p>
                <input class="noPrintPdf" type="number" id="year" (change)="filterByYear($event.target.value)" placeholder="Enter Year" [value]="selected_year" style="width: 120px;" autocomplete="off">
              </div> -->
            </div>
            
            <div style="overflow-x: auto; overflow-y: auto; margin-top: 15px;">
              <div *ngFor="let producer of filtered_producers">
                <table class="table table-sm table-hover table-bordered">
                  <thead>
                    <tr>
                      <th style="font-size: 14px;">{{ getFirstName(producer.name) }}</th>
                      <th *ngFor="let month of months" scope="col" style="font-size: 14px;">{{ month }}</th>
                      <th>Total</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td scope="row" style="font-size: 14px;">Production</td>
                      <ng-container *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]">
                        <td style="font-size: 14px;">{{ (getProducerProdBonus(producer.id, i-1)) | currency:'USD' }}</td>
                      </ng-container>
                      <td style="font-size: 14px;">{{ (getTotalProductionBonus(producer.id)) | currency:'USD' }}</td>
                    </tr>
                    <tr *ngIf="selected_year >= 2026">
                      <td scope="row" style="font-size: 14px;">Apps Written</td>
                      <ng-container *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]">
                        <td style="font-size: 14px;">{{ (getProducerAppWrittenBonus(producer.id, i-1)) | currency:'USD' }}</td>
                      </ng-container>
                      <td style="font-size: 14px;">{{ (getTotalProducerAppWrittenBonus(producer.id)) | currency:'USD' }}</td>
                    </tr>
                    <tr>
                      <td scope="row" style="font-size: 14px;">Corporate</td>
                      <ng-container *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]">
                        <td>
                          <input type="number" style="width: 60px; font-size: 14px;" [value]="getProducerCorpBonus(producer.id, i-1)" (change)="updateBonus($event, producer.id, i)">
                        </td>
                      </ng-container>
                      <td style="font-size: 14px;">{{ (getTotalCorporateBonus(producer.id)) | currency:'USD' }}</td>
                    </tr>
                    <tr>
                      <td scope="row" style="font-size: 14px;"><i>Total</i></td>
                      <ng-container *ngFor="let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]">
                        <td>{{ (getProducerProdBonus(producer.id, i-1) + getProducerCorpBonus(producer.id, i-1) + getProducerAppWrittenBonus(producer.id, i-1)) | currency:'USD' }}</td>
                      </ng-container>
                      <td>{{ (getTotalProductionBonus(producer.id) + getTotalCorporateBonus(producer.id) + getTotalProducerAppWrittenBonus(producer.id)) | currency:'USD' }}</td>
                    </tr>
                  </tbody>
                </table>
              </div>

              <div *ngIf="!show_bonus_breakdown">
                <h5>Office Bonus Total = {{ (getOfficeBonusTotal()) | currency:'USD' }}</h5>
              </div>

              <div *ngIf="show_bonus_breakdown" style="margin-top: 30px;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                    <h4 class="header" style="margin-bottom: 0;">Bonus Breakdown Details</h4>
                    <select class="custom-select" style="width: 150px;" (change)="updateBreakdownMonth($event.target.value)">
                        <option value="all" [selected]="breakdown_month == 'all'">All Months</option>
                        <option *ngFor="let month of months; index as i" value="{{i}}" [selected]="breakdown_month == i">{{ month }}</option>
                    </select>
                </div>
                <div *ngFor="let producer of filtered_producers">
                    <ng-container *ngIf="bonus_breakdown[producer.id]">
                        <table class="table table-sm table-bordered">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>Type</th>
                                    <th>Client / Label</th>
                                    <th>Bonus</th>
                                </tr>
                            </thead>
                            <tbody>
                                <ng-container *ngFor="let month of [0,1,2,3,4,5,6,7,8,9,10,11]">
                                    <ng-container *ngIf="breakdown_month == 'all' || breakdown_month == month">
                                        <ng-container *ngFor="let item of bonus_breakdown[producer.id][month]">
                                            <tr>
                                                <td>{{ months[month] }}</td>
                                                <td>{{ item.type | titlecase }}</td>
                                                <td>{{ item.client_name }}</td>
                                                <td>{{ item.bonus | currency:'USD' }}</td>
                                            </tr>
                                        </ng-container>
                                    </ng-container>
                                </ng-container>
                            </tbody>
                        </table>
                    </ng-container>
                </div>
              </div>
            </div>
        </div>
    </div>
</div>
